<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<link rel="stylesheet" href="./main.css">
	<link rel="stylesheet" href="./sakura.min.css">	
	<script src="./sakura.js"></script>
	<style>
		#frame {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			border: none;
			z-index: 9999;
		}
	</style>
</head>
<iframe style="display: none;" id="frame" src="" width="600" height="400" allowfullscreen></iframe>
<body>
	<div id="openBody">
		<h1 class="gameTitle" ><span style="color: red;">산타</span>의 <span style="color: green;">추억 상자</span></h1>
		<div class="centered-div">		
			<input type="button" id="startBtn" value="시작" class="startBtn" >
			<input type="button" value="종료" class="startBtn" >

			

			<audio id="myAudio" controls style="display: none;">
				<source controls autoplay  src="/models/kenney/item/gift/bgm.mp3" type="audio/mpeg">		
			</audio>
			

		</div>	
		<canvas id="three-canvas"></canvas>	
	</div>
	<script>		
		 var sakura = new Sakura('body', {
            image: '/models/kenney/character/santaRightWalk1.png', // 사용자 이미지 URL
            count: 1 // 벚꽃 이미지 개수
        });

		const startBtn = document.getElementById('startBtn');

	// 클릭 이벤트가 있는지 확인하는 함수
	function isClickable(element) {
		// 요소에 클릭 이벤트가 이미 있는지 확인
		const hasClickEvent = element && typeof element.onclick === 'function';
		return hasClickEvent;
	}

	// 클릭 이벤트가 없으면 추가하는 로직
	if (!isClickable(startBtn)) {
		startBtn.addEventListener('click', function() {
			var audio = document.getElementById("myAudio");
			audio.volume = 0.3;
			//audio.play();
			var frame = document.getElementById("frame");
			frame.src = "http://localhost:8080/mainPage.html";
			frame.style.display = "block";
			var openBody = document.getElementById("openBody");			
			openBody.style.display = "none";
			frame.onload = function() {
            	// iframe에 포커스 주기
            	frame.contentWindow.focus();

           	 // 또는 iframe 내부의 특정 요소에 포커스 주기 (예: 첫 번째 input 요소)
            	// frame.contentWindow.document.querySelector('input').focus();
        	};

		});
	} else {
			
	}

	  </script>
</body>
</html>